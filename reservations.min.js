(function(){function require(path,parent,orig){var resolved=require.resolve(path);if(null==resolved){orig=orig||path;parent=parent||"root";var err=new Error('Failed to require "'+orig+'" from "'+parent+'"');err.path=orig;err.parent=parent;err.require=true;throw err}var module=require.modules[resolved];if(!module._resolving&&!module.exports){var mod={};mod.exports={};mod.client=mod.component=true;module._resolving=true;module.call(this,mod.exports,require.relative(resolved),mod);delete module._resolving;module.exports=mod.exports}return module.exports}require.modules={};require.aliases={};require.resolve=function(path){if(path.charAt(0)==="/")path=path.slice(1);var paths=[path,path+".js",path+".json",path+"/index.js",path+"/index.json"];for(var i=0;i<paths.length;i++){var path=paths[i];if(require.modules.hasOwnProperty(path))return path;if(require.aliases.hasOwnProperty(path))return require.aliases[path]}};require.normalize=function(curr,path){var segs=[];if("."!=path.charAt(0))return path;curr=curr.split("/");path=path.split("/");for(var i=0;i<path.length;++i){if(".."==path[i]){curr.pop()}else if("."!=path[i]&&""!=path[i]){segs.push(path[i])}}return curr.concat(segs).join("/")};require.register=function(path,definition){require.modules[path]=definition};require.alias=function(from,to){if(!require.modules.hasOwnProperty(from)){throw new Error('Failed to alias "'+from+'", it does not exist')}require.aliases[to]=from};require.relative=function(parent){var p=require.normalize(parent,"..");function lastIndexOf(arr,obj){var i=arr.length;while(i--){if(arr[i]===obj)return i}return-1}function localRequire(path){var resolved=localRequire.resolve(path);return require(resolved,parent,path)}localRequire.resolve=function(path){var c=path.charAt(0);if("/"==c)return path.slice(1);if("."==c)return require.normalize(p,path);var segs=parent.split("/");var i=lastIndexOf(segs,"deps")+1;if(!i)i=0;path=segs.slice(0,i+1).join("/")+"/deps/"+path;return path};localRequire.exists=function(path){return require.modules.hasOwnProperty(localRequire.resolve(path))};return localRequire};require.register("component-indexof/index.js",function(exports,require,module){var indexOf=[].indexOf;module.exports=function(e,t){if(indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}});require.register("component-classes/index.js",function(exports,require,module){function ClassList(e){if(!e)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}var index=require("indexof"),re=/\s+/,toString=Object.prototype.toString;module.exports=function(e){return new ClassList(e)},ClassList.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=index(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},ClassList.prototype.remove=function(e){if("[object RegExp]"==toString.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=index(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},ClassList.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},ClassList.prototype.toggle=function(e){return this.list?(this.list.toggle(e),this):(this.has(e)?this.remove(e):this.add(e),this)},ClassList.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,""),t=e.split(re);return""===t[0]&&t.shift(),t},ClassList.prototype.has=ClassList.prototype.contains=function(e){return this.list?this.list.contains(e):!!~index(this.array(),e)}});require.register("component-event/index.js",function(exports,require,module){exports.bind=function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent("on"+t,n),n},exports.unbind=function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent("on"+t,n),n}});require.register("component-autoscale-canvas/index.js",function(exports,require,module){module.exports=function(e){var t=e.getContext("2d"),n=window.devicePixelRatio||1;return 1!=n&&(e.style.width=e.width+"px",e.style.height=e.height+"px",e.width*=n,e.height*=n,t.scale(n,n)),e}});require.register("component-raf/index.js",function(exports,require,module){function fallback(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-prev));setTimeout(e,n),prev=t}exports=module.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||fallback;var prev=(new Date).getTime(),cancel=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;exports.cancel=function(e){cancel.call(window,e)}});require.register("component-spinner/index.js",function(exports,require,module){function Spinner(){var e=this;this.percent=0,this.el=document.createElement("canvas"),this.el.className="spinner",this.ctx=this.el.getContext("2d"),this.size(50),this.fontSize(11),this.speed(60),this.font("helvetica, arial, sans-serif"),this.stopped=!1,function t(){e.stopped||(raf(t),e.percent=(e.percent+e._speed/36)%100,e.draw(e.ctx))}()}var autoscale=require("autoscale-canvas"),raf=require("raf");module.exports=Spinner,Spinner.prototype.stop=function(){this.stopped=!0},Spinner.prototype.size=function(e){return this.el.width=e,this.el.height=e,autoscale(this.el),this},Spinner.prototype.text=function(e){return this._text=e,this},Spinner.prototype.fontSize=function(e){return this._fontSize=e,this},Spinner.prototype.font=function(e){return this._font=e,this},Spinner.prototype.speed=function(e){return this._speed=e,this},Spinner.prototype.light=function(){return this._light=!0,this},Spinner.prototype.draw=function(e){var t=Math.min(this.percent,100),n=window.devicePixelRatio||1,r=this.el.width/n,i=r/2,a=i,s=i,o=i-1,l=this._fontSize,d=this._light;e.font=l+"px "+this._font;var u=2*Math.PI*(t/100);e.clearRect(0,0,r,r);var c=e.createLinearGradient(i+Math.sin(1.5*Math.PI-u)*i,i+Math.cos(1.5*Math.PI-u)*i,i+Math.sin(.5*Math.PI-u)*i,i+Math.cos(.5*Math.PI-u)*i);d?(c.addColorStop(0,"rgba(255, 255, 255, 0)"),c.addColorStop(1,"rgba(255, 255, 255, 1)")):(c.addColorStop(0,"rgba(0, 0, 0, 0)"),c.addColorStop(1,"rgba(0, 0, 0, 1)")),e.strokeStyle=c,e.beginPath(),e.arc(a,s,o,u-Math.PI,u,!1),e.stroke(),e.strokeStyle=d?"rgba(255, 255, 255, .4)":"#eee",e.beginPath(),e.arc(a,s,o-1,0,2*Math.PI,!0),e.stroke();var p=this._text||"",m=e.measureText(p).width;return d&&(e.fillStyle="rgba(255, 255, 255, .9)"),e.fillText(p,a-m/2+1,s+l/2-1),this}});require.register("component-type/index.js",function(exports,require,module){var toString=Object.prototype.toString;module.exports=function(e){switch(toString.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":typeof e}});require.register("component-value/index.js",function(exports,require,module){function get(e){switch(type(e)){case"checkbox":case"radio":if(e.checked){var t=e.getAttribute("value");return null==t?!0:t}return!1;case"radiogroup":for(var n,r=0;n=e[r];r++)if(n.checked)return n.value;break;case"select":for(var i,r=0;i=e.options[r];r++)if(i.selected)return i.value;break;default:return e.value}}function set(e,t){switch(type(e)){case"checkbox":case"radio":e.checked=t?!0:!1;break;case"radiogroup":for(var n,r=0;n=e[r];r++)n.checked=n.value===t;break;case"select":for(var i,r=0;i=e.options[r];r++)i.selected=i.value===t;break;default:e.value=t}}function type(e){var t="array"==typeOf(e)||"object"==typeOf(e);t&&(e=e[0]);var n=e.nodeName.toLowerCase(),r=e.getAttribute("type");return t&&r&&"radio"==r.toLowerCase()?"radiogroup":"input"==n&&r&&"checkbox"==r.toLowerCase()?"checkbox":"input"==n&&r&&"radio"==r.toLowerCase()?"radio":"select"==n?"select":n}var typeOf=require("type");module.exports=function(e,t){return 2==arguments.length?set(e,t):get(e)}});require.register("jb55-domready/index.js",function(exports,require,module){!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):this[e]=t()}("domready",function(e){function t(e){for(p=1;e=r.shift();)e()}var n,r=[],i=!1,a=document,o=a.documentElement,s=o.doScroll,l="DOMContentLoaded",d="addEventListener",c="onreadystatechange",u="readyState",p=/^loade|c/.test(a[u]);return a[d]&&a[d](l,n=function(){a.removeEventListener(l,n,i),t()},i),s&&a.attachEvent(c,n=function(){/^c/.test(a[u])&&(a.detachEvent(c,n),t())}),e=s?function(t){self!=top?p?t():r.push(t):function(){try{o.doScroll("left")}catch(n){return setTimeout(function(){e(t)},50)}t()}()}:function(e){p?e():r.push(e)}})});require.register("visionmedia-debug/index.js",function(exports,require,module){module.exports="undefined"==typeof window?require("./lib/debug"):require("./debug")});require.register("visionmedia-debug/debug.js",function(exports,require,module){function debug(e){return debug.enabled(e)?function(t){t=coerce(t);var n=new Date,r=n-(debug[e]||n);debug[e]=n,t=e+" "+t+" +"+debug.humanize(r),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function coerce(e){return e instanceof Error?e.stack||e.message:e}module.exports=debug,debug.names=[],debug.skips=[],debug.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;r>i;i++)e=n[i].replace("*",".*?"),"-"===e[0]?debug.skips.push(new RegExp("^"+e.substr(1)+"$")):debug.names.push(new RegExp("^"+e+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(e){var t=1e3,n=6e4,r=60*n;return e>=r?(e/r).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(0|e/t)+"s":e+"ms"},debug.enabled=function(e){for(var t=0,n=debug.skips.length;n>t;t++)if(debug.skips[t].test(e))return!1;for(var t=0,n=debug.names.length;n>t;t++)if(debug.names[t].test(e))return!0;return!1},window.localStorage&&debug.enable(localStorage.debug)});require.register("component-emitter/index.js",function(exports,require,module){function Emitter(e){return e?mixin(e):void 0}function mixin(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}var index=require("indexof");module.exports=Emitter,Emitter.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;var n=index(r,t._off||t);return~n&&r.splice(n,1),this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,t)}return this},Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length}});require.register("RedVentures-reduce/index.js",function(exports,require,module){module.exports=function(e,t,r){for(var n=0,i=e.length,a=3==arguments.length?r:e[n++];i>n;)a=t.call(null,a,e[n],++n,e);return a}});require.register("visionmedia-superagent/lib/client.js",function(exports,require,module){function noop(){}function isHost(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function getXHR(){if(root.XMLHttpRequest&&("file:"!=root.location.protocol||!root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}function isObject(e){return e===Object(e)}function serialize(e){if(!isObject(e))return e;var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function parseString(e){for(var t,n,r={},i=e.split("&"),a=0,o=i.length;o>a;++a)n=i[a],t=n.split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function parseHeader(e){var t,n,r,i,a=e.split(/\r?\n/),o={};a.pop();for(var s=0,u=a.length;u>s;++s)n=a[s],t=n.indexOf(":"),r=n.slice(0,t).toLowerCase(),i=trim(n.slice(t+1)),o[r]=i;return o}function type(e){return e.split(/ *; */).shift()}function params(e){return reduce(e.split(/ *; */),function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})}function Response(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body=this.parseBody(this.text)}function Request(e,t){var n=this;Emitter.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var t=new Response(n);"HEAD"==e&&(t.text=null),n.callback(null,t)})}function request(e,t){return"function"==typeof t?new Request("GET",e).end(t):1==arguments.length?new Request("GET",e):new Request(e,t)}var Emitter=require("emitter"),reduce=require("reduce"),root="undefined"==typeof window?this:window,trim="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(e){return this.header[e.toLowerCase()]},Response.prototype.setHeaderProperties=function(){var e=this.header["content-type"]||"";this.type=type(e);var t=params(e);for(var n in t)this[n]=t[n]},Response.prototype.parseBody=function(e){var t=request.parse[this.type];return t?t(e):null},Response.prototype.setStatusProperties=function(e){var t=0|e/100;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},Response.prototype.toError=function(){var e=this.req,t=e.method,n=e.path,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.path=n,i},request.Response=Response,Emitter(Request.prototype),Request.prototype.timeout=function(e){return this._timeout=e,this},Request.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},Request.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},Request.prototype.set=function(e,t){if(isObject(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},Request.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},Request.prototype.type=function(e){return this.set("Content-Type",request.types[e]||e),this},Request.prototype.auth=function(e,t){var n=btoa(e+":"+t);return this.set("Authorization","Basic "+n),this},Request.prototype.query=function(e){return"string"!=typeof e&&(e=serialize(e)),e&&this._query.push(e),this},Request.prototype.send=function(e){var t=isObject(e),n=this.getHeader("Content-Type");if(t&&isObject(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return t?(n||this.type("json"),this):this},Request.prototype.callback=function(e,t){var n=this._callback;return 2==n.length?n(e,t):e?this.emit("error",e):(n(t),void 0)},Request.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},Request.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(e){var t=this,n=this.xhr=getXHR(),r=this._query.join("&"),i=this._timeout,a=this._data;if(this._callback=e||noop,this._withCredentials&&(n.withCredentials=!0),n.onreadystatechange=function(){return 4==n.readyState?0==n.status?t.aborted?t.timeoutError():t.crossDomainError():(t.emit("end"),void 0):void 0},n.upload&&(n.upload.onprogress=function(e){e.percent=100*(e.loaded/e.total),t.emit("progress",e)}),i&&!this._timer&&(this._timer=setTimeout(function(){t.abort()},i)),r&&(r=request.serializeObject(r),this.url+=~this.url.indexOf("?")?"&"+r:"?"+r),n.open(this.method,this.url,!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!isHost(a)){var o=request.serialize[this.getHeader("Content-Type")];o&&(a=o(a))}for(var s in this.header)null!=this.header[s]&&n.setRequestHeader(s,this.header[s]);return n.send(a),this},request.Request=Request,request.get=function(e,t,n){var r=request("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},request.head=function(e,t,n){var r=request("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},request.del=function(e,t){var n=request("DELETE",e);return t&&n.end(t),n},request.patch=function(e,t,n){var r=request("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},request.post=function(e,t,n){var r=request("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},request.put=function(e,t,n){var r=request("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},module.exports=request});require.register("reservations.js/index.js",function(exports,require,module){function setup(){debug("showing reservation form");var e=document.getElementById("perfect-reservation-form");e.innerHTML=form();var t=e.getElementsByTagName("form")[0],n=document.getElementById("perfect-date"),a=document.getElementById("perfect-party-size"),r=document.getElementById("perfect-phone");value(n,(new Date).toISOString().substring(0,10)),events.bind(t,"submit",handleFormSubmission),events.bind(n,"change",handleDateChange),events.bind(a,"change",retrieveAvailableTimes),events.bind(r,"keydown",numericInputOnly),getAvailablePartySizes()}function handleFormSubmission(e){e.preventDefault(),debug("handling form submission");var t=document.getElementById("perfect-alerts"),n=document.getElementById("perfect-create"),a=document.getElementById("perfect-date"),r=document.getElementById("perfect-email"),i=document.getElementById("perfect-reservation-form"),d=i.getElementsByTagName("fieldset")[0],s=document.getElementById("perfect-name"),l=document.getElementById("perfect-phone"),o=document.getElementById("perfect-time");t.innerHTML=null;var u=o.options[o.selectedIndex].innerText,m=value(a),c={date:value(a),email:value(r),name:value(s),party:getPartySize(),phone:parseInt(value(l),10),time:value(o)};if(isValidData(c)){n.style.display="none",d.innerHTML+=confirmTemplate({partySize:c.party,time:u,date:m,name:c.name});var g=document.getElementById("perfect-go-back"),p=document.getElementById("perfect-confirm-button");events.bind(g,"click",function(e){debug("going back to the form"),e.preventDefault(),document.getElementById("perfect-confirm").remove(),document.getElementById("perfect-create").style.display="block",setTimeAndSubmitDisabled(!0)}),events.bind(p,"click",function(e){debug("confirming reservation for %s of %s at %s on %s",c.name,c.party,c.time,c.date),e.preventDefault(),post("/reservations",c,function(e){document.getElementById("perfect-confirm").remove(),e?(document.getElementById("perfect-create").style.display="block",addAlert("reservation-form","There was a problem creating your reservation. If you have already created a reservation at this restaurant you will not be able to create a second one in a similar timespan.")):d.innerHTML+=success({partySize:c.party,time:u,date:m})})})}return!1}function handleDateChange(e){debug("handling date change");var t=getDate(),n=midnight(new Date);t.valueOf()<n.valueOf()?value(e.target,n.toISOString().substring(0,10)):n.getMonth()<t.getMonth()&&n.getDate()<t.getDate()?addAlert("date","Reservation date must be within 30 days."):retrieveAvailableTimes()}function retrieveAvailableTimes(){debug("retrieving available times");var e=document.getElementById("perfect-alerts"),t=getPartySize(),n=value(document.getElementById("perfect-date")),a=document.getElementById("perfect-time");e.innerHTML=null,0===t?setTimeAndSubmitDisabled(!0):get("/available-times",{party:t,date:n},function(e,r){if(e)addAlert("date",e.message);else if(a.innerHTML=null,r.length&&r.length>0){for(var i=0;i<r.length;i++){var d=r[i],s=parseInt(d.split(":")[0],10),l=s>12?" pm":" am",o=(s>12?s-12:s)+":"+d.split(":")[1]+l,u=document.createElement("option");u.innerHTML=o,u.value=d,a.appendChild(u)}setTimeAndSubmitDisabled(!1)}else addAlert("date","No reservations available for parties of "+t+" on "+n)})}function getAvailablePartySizes(){debug("get available party sizes"),get("/party-sizes",function(e,t){if(!e)for(var n=document.getElementById("perfect-party-size"),a=0;a<t.length;a++){var r=document.createElement("option"),i=t[a];r.innerText=i,r.value=i,n.appendChild(r)}})}function isValidData(e){debug("validating data");var t=e.name,n=e.phone,a=getDate(),r=e.party,i=e.time,d=!0;return i&&0!==i||(addAlert("time","Time selected is invalid."),d=!1),isNaN(a)&&(addAlert("date","Date is an invalid format."),d=!1),a||(addAlert("date","You must select a date."),d=!1),a.valueOf()<midnight(new Date).valueOf()&&(addAlert("date","Date selected is in the past."),d=!1),(!t||t.length<1||t.length>50)&&(addAlert("name","Name must be between 1 and 50 characters."),d=!1),(!n||isNaN(n)||1e9>n||n>9999999999)&&(addAlert("phone","Phone number must be in the format ########## and 10 digits."),d=!1),(!r||isNaN(r)||1>r||r>99)&&(addAlert("partySize","Party Size must be between 1 and 99 people."),d=!1),d}function midnight(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function getDate(){var e=document.getElementById("perfect-date"),t=value(e).split("-");return new Date(t[0],t[1]-1,t[2])}function addAlert(e,t){var n=document.getElementById("perfect-alerts");n.innerHTML+=alertTemplate({field:e,message:t});var a=n.getElementsByTagName("button")[0],r=document.getElementById("perfect-"+e);classes(r).add("perfect-error"),events.bind(a,"click",function(e){var t=e.target.attributes["data-dismiss"];n.getElementsByClassName(t)[0].remove()}),events.bind(r,"change",function(){classes(r).remove("perfect-error")})}function setTimeAndSubmitDisabled(e){debug("setting time and submit disabled (%s)",e);var t=document.getElementById("perfect-time"),n=document.getElementById("perfect-submit");e?(t.setAttribute("disabled"),n.setAttribute("disabled")):(t.removeAttribute("disabled"),n.removeAttribute("disabled"))}function getPartySize(){var e=document.getElementById("perfect-party-size");return parseInt(value(e),10)}function numericInputOnly(e){var t=e.charCode||e.keyCode||0;8===t||9===t||46===t||t>=37&&40>=t||t>=48&&57>=t&&!e.shiftKey||t>=96&&105>=t&&!e.shiftKey||e.preventDefault()}function spin(){var e=new Spinner,t=document.getElementById("perfect-spinner");return t&&t.appendChild(e.el),{stop:function(){e.stop(),t&&(t.innerText=null)}}}function get(e,t,n){2===arguments.length&&(n=t,t={});var a=spin();superagent.get(PERFECT_API_URL+e).query(t).set({"X-Perfect-API-Key":PERFECT_API_KEY,"X-Perfect-API-Version":PERFECT_API_VERSION}).end(function(e,t){a.stop(),e?n(e,t):t.error?n(t.error,t):n(null,t.body)})}function post(e,t,n){var a=spin();superagent.post(PERFECT_API_URL+e).send(t).set({"X-Perfect-API-Key":PERFECT_API_KEY,"X-Perfect-API-Version":PERFECT_API_VERSION}).end(function(e,t){a.stop(),e?n(e,t):t.error?n(t.error,t):n(null,t.body)})}var alertTemplate=require("./template/alert"),classes=require("classes"),confirmTemplate=require("./template/confirm"),debug=require("debug")("reservations.js"),domready=require("domready"),events=require("event"),form=require("./template/form"),Spinner=require("spinner"),success=require("./template/success"),superagent=require("superagent"),value=require("value"),PERFECT_API_KEY=null,PERFECT_API_URL="https://api.perfec.tt/v1/restaurants",PERFECT_API_VERSION="1.5.1";module.exports.activate=function(e,t){PERFECT_API_KEY=e,t&&(PERFECT_API_URL=t),debug("key %s",PERFECT_API_KEY),debug("url %s",PERFECT_API_URL),debug("version %s",PERFECT_API_VERSION),domready(function(){debug("authenticating"),get("/auth",function(e,t){e?(debug(e),window.alert("Unable to load Perfect reservation form.\n"+e.message)):(debug("authenticated"),PERFECT_API_URL+="/"+t._id,setup())})})}});require.register("reservations.js/template/alert.js",function(exports,require,module){module.exports=function(e){function t(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return'<div class="perfect-alert perfect-'+t(e.field)+'-alert"><button class="perfect-alert-close" data-dismiss="perfect-'+t(e.field)+'-alert">x</button>'+t(e.message)+"</div>"}});require.register("reservations.js/template/confirm.js",function(exports,require,module){module.exports=function(e){function t(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return'<div id="perfect-confirm">\n  <h3>Confirm Reservation</h3>\n  <p>Confirm that you would like to create a reservation for '+t(e.name)+" with party of "+t(e.partySize)+" on "+t(e.date)+" at "+t(e.time)+'.</p>\n  <button id="perfect-confirm-button">Confirm Reservation</button>\n  <button id="perfect-go-back">Go Back</button>\n</div>'}});require.register("reservations.js/template/form.js",function(exports,require,module){module.exports=function(){return'<form action="#">\n  <fieldset>\n    <legend>Reservations</legend>\n    <div id="perfect-spinner"></div>\n    <div id="perfect-create">\n      <h3>Find a Reservation</h3>\n      <div id="perfect-alerts" class="perfect-input-group"></div>\n      <div class="perfect-input-group">\n        <label for="name">Name</label>\n        <input id="perfect-name" type="text" name="name" maxlength="40" required autofocus>\n      </div>\n      <div class="perfect-input-group">\n        <label for="phone">Phone</label>\n        <input id="perfect-phone" type="tel" name="phone" maxlength="10" required>\n        <span>Phone must be able to receive SMS messages.</span>\n      </div>\n      <div class="perfect-input-group">\n        <label for="email">Email</label>\n        <input id="perfect-email" type="email" name="email" maxlength="50" required>\n      </div>\n      <div class="perfect-input-group">\n        <label for="date">Date</label>\n        <input id="perfect-date" type="date" name="date" required>\n      </div>\n      <div class="perfect-input-group">\n        <label for="party-size">Party Size</label>\n        <select id="perfect-party-size" name="party-size">\n          <option value="0" selected="true">Select Size</option>\n        </select>\n      </div>\n      <div class="perfect-input-group">\n        <label for="time">Time</label>\n        <select id="perfect-time" name="time" disabled="disabled"></select>\n      </div>\n      <div class="perfect-input-group">\n        <input id="perfect-submit" type="submit" value="Make Reservation" disabled="disabled">\n      </div>\n    </div>\n  </fieldset>\n</form>'}});require.register("reservations.js/template/success.js",function(exports,require,module){module.exports=function(e){function t(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return'<div id="perfect-success">\n  <h3>Reservation Confirmed</h3>\n  <p>Your reservation for a party of '+t(e.partySize)+" on "+t(e.date)+" at "+t(e.time)+" has been created! You will receive a confirmation email shortly.</p>\n  <p>We look forward to seeing you then!</p>\n</div>"}});require.alias("component-classes/index.js","reservations.js/deps/classes/index.js");require.alias("component-classes/index.js","classes/index.js");require.alias("component-indexof/index.js","component-classes/deps/indexof/index.js");require.alias("component-event/index.js","reservations.js/deps/event/index.js");require.alias("component-event/index.js","event/index.js");require.alias("component-spinner/index.js","reservations.js/deps/spinner/index.js");require.alias("component-spinner/index.js","spinner/index.js");require.alias("component-autoscale-canvas/index.js","component-spinner/deps/autoscale-canvas/index.js");require.alias("component-raf/index.js","component-spinner/deps/raf/index.js");require.alias("component-value/index.js","reservations.js/deps/value/index.js");require.alias("component-value/index.js","reservations.js/deps/value/index.js");require.alias("component-value/index.js","value/index.js");require.alias("component-type/index.js","component-value/deps/type/index.js");require.alias("component-value/index.js","component-value/index.js");require.alias("jb55-domready/index.js","reservations.js/deps/domready/index.js");require.alias("jb55-domready/index.js","domready/index.js");require.alias("visionmedia-debug/index.js","reservations.js/deps/debug/index.js");require.alias("visionmedia-debug/debug.js","reservations.js/deps/debug/debug.js");require.alias("visionmedia-debug/index.js","debug/index.js");require.alias("visionmedia-superagent/lib/client.js","reservations.js/deps/superagent/lib/client.js");require.alias("visionmedia-superagent/lib/client.js","reservations.js/deps/superagent/index.js");require.alias("visionmedia-superagent/lib/client.js","superagent/index.js");require.alias("component-emitter/index.js","visionmedia-superagent/deps/emitter/index.js");require.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js");require.alias("RedVentures-reduce/index.js","visionmedia-superagent/deps/reduce/index.js");require.alias("visionmedia-superagent/lib/client.js","visionmedia-superagent/index.js");require.alias("reservations.js/index.js","reservations.js/index.js");if(typeof exports=="object"){module.exports=require("reservations.js")}else if(typeof define=="function"&&define.amd){define(function(){return require("reservations.js")})}else{this["Reservations"]=require("reservations.js")}})();